# Quest 01. 리눅스와 친해지기

## Introduction
### 이번 퀘스트를 통해 리눅스의 기본적인 구조와 기능에 대해 공부할 수 있습니다.


# Topics
## 리눅스의 기본 커맨드
- cd

- pwd

- ls

- cp 

- mv

- mkdir

- rm

- touch 

- ln

- echo

- cat

- tail 

- find

- ps

- kill

- grep

- wc

- df

- du

- 파이프(|) 문자 

​


## 리눅스의 기본적인 디렉토리 구성
- /bin : binary의 약자로 실행파일 모음. 일반적으로 사용하는 mv, cat등 명령어 프로그램들이 있음

- /usr/bin : /bin과 유사한 역할을 한다. 콘솔에서 확장된 프로그램이 들어간다.
/bin과의 가장 큰 차이점은 general-system-wide 범위에서 사용가능하다는 점이다. 이에 속하는 바이너리 파일로는 sudo 명령어, vi 명령어 등이 위치한다.

- /boot : 부팅과 관련된 파일들이 모여있음 

- /dev : device의 약자로 물리적인 장치들이 파일화 되어 있다.

- /etc : 각종 환경 설정 파일들이 모여 있음

- /home : 개인사용자들 디렉토리

- /lib : 각종 라이브러리 저장 디렉토리

- /mnt : CD-ROM, 네트워크 파일 시스템 등을 마운트 할때 사용되는 디렉토리

- /proc : 현재 실행되고 있는 프로세스들이 파일화 되어서 저장되는 디렉토리

- /root : root계정의 홈 디렉토리

- /sbin : System-binary의 약자로, 주로 시스템 관리자가 쓰는 시스템 관련 명령어 프로그램들이 모여있다. /bin과 같은 역할을 한다. 그러나 실행하기 위해서는 root 권한이 필요하다.

- /usr/sbin : /usr/bin과 유사한 역할을 한다. 그러나 실행하기 위해서는 root 권한이 필요하다.

- /tmp : 임시 저장 디렉토리. 일반적으로 모든 사용자들에게 열려 있음.

- /usr : 주로 새로 설치되는 프로그램들이 저장됨. '명령어' 보다 '프로그램'이라 부르는것이 더 익숙한 것들이 저장된다. 윈도우의 Program Files같은 폴더.

- /var : 시스템 로그, 스풀링 파일 들이 저장된다. 메일 서버로 운영될 경우 메일이 여기 저장된다.



## 쉘과 환경변수와 퍼미션
- sh : 쉘(Shell)은 받은 명령(Command)을 보낼 수있는 사용자 인터페이스로 작동하는 프로그램입니다 . 그런 다음 커널(Kernel)은 명령을 해석하고 CPU 및 기타 컴퓨터 하드웨어에 특정 작업을 수행하는 방법을 알려줍니다.

- bash :  Bourne Again Shell의 줄임말로 스티븐 본이 개발한 최초 유닉스 프로그램인 sh의 확장판이다. 쉘을 포함한 모든 유닉스 쉘, 공통 기본 기능이 포함되어 파이프라인, here document, 명령 치환, 변수, 제어 구조 및 와일드 카드등의 기능이 있고, 사용자 계정에 대한 가장 일반적인 기본 셸입니다.
- zsh : 대화 형 사용을 위해 설계되었습니다. z셸의 일부 기능에는 맞춤법 검사, 단일 버퍼에서 여러 줄 명령 편집, 개선된 변수 및 배열 처리, 사용자 지정, 프로그래밍 가능한 명령줄 완성 및 테마가 있는 프롬프트가 포함됩니다. (bash와 유사하나 zsh이 부가적인 기능을 포함해 좀 더 편리하다고 평가됨)

- csh : C Shell이다. 빌조이(Bill Joy)가 캘리포니아 버클리 대학에서 만들었고, 주요 의도는 C 언어와 유사한 구문으로 쉘을 만드는 것이었습니다. 따라서 제어 구조 및 표현 문법과 같은 항목이 포함되었습니다. 다른 기능에는 기록 및 편집 메커니즘, aliases(별칭?), 디렉터리 스택, 물결표 표기법, cdpath, 작업 제어 및 경로 해싱이 포함됩니다.

- tcsh : tcshC 쉘과 호환되도록 개발되었고, t in tcsh은 운영체제인 TENEX에서 따왔습니다. tcshcsh명령줄 완성, 명령줄 편집 및 기타 기능과 같은 확장 기능에 매우 가깝습니다 . Mac OS X tcsh는 기본적으로 제공되지만 버전 10.3에서 bash로 전환되었습니다.

- .bash_profile : 

- .bashrc : 

- .zshrc

- env :  env는 bash에서 환경 변수를 조회하거나 등록하는 명령어다. 그냥 env만 붙이면 시스템에 등록된 환경변수들이 출력된다. 환경변수나 쉘 변수는 $를 붙여서 조회할수있다.
    ```$ env [변수명] ```

- set : set는 쉘 변수 관련 명령어로 set을 통해 쉘변수를 만들수도 있고 변수명에 값을 할당해 주는 방식으로 생성할 수도 있다.
    ``` $ set [변수명]=[값]```

- unset : unset은 쉘변수를 해제하기 위해서 사용한다 (환경변수에도 적용할 수 있다.)
    ```$ unset [변수명]```

- export: ​export를 사용하면 쉘 변수를 환경 변수로 만들 수도 있다
    ```$export [환경변수명]```

- chmod : chmod는 파일의 권한을 바꾸어 주는 명령어이다. 
    ```$ chmod [변경할 권한 대상] +[부여할 권한] -[없앨 권한] ...[대상 파일명]```

- chown : chown은 파일이나 디렉토리를 소유하고 있는 유저를 변경하는 명령어이다.
    ```$ chown [유저]:[그룹] [파일명/ 경로]```

- chgrp : chrgp 명령어는 unix계열 운영 체제의 일반 사용자들이 파일 시스템 오브젝트에 연결된 그룹을 변경하는 명령어이다. 파일 시스템 오브젝트에는 3가지 집합의 접근 권한이 있는데 그 중 하나가 소유자를 위한 것이고, 다른 하나가 그룹을 위한 것이며, 나머지 하나가 기타 사용자를 위한 것이다.
    ```$ chrgp [옵션] [그룹]```

- sudo : 유저가 소유권을 가지지 못한 파일을 실행할 경우 루트권한이 필요하다 이때, 루트 권한을 얻어오기 위해 사용하는 명령어가 sudo명령어로 root권한으로 명령을 할수 있도록 해주는 명령어이다. sudo를 사용할 경우 소유권을 가지지 못한 파일의 접근 권한도 변경하는것이 가능하다.

- setuid : setuid (Set User Id)가 붙은 프로그램은 실행 시 소유자의 권한으로 전환되며 setgid가 붙은 프로그램은 실행시 소유 그룹의 권한으로 전환된다.setuid와 setgid가 필요한 이유는 일반 사용자가 변경할 수 없는 파일이지만 변경이 필요한 경우가 있어서 이다.
    ```$ chmod 4755 setuid-prog```

- Sticky bit : sticky bit 스티키 비트(1000)가 설정된 디렉토리는 누구나 파일을 만들 수 있지만 자신의 소유가 아닌 파일은 삭제할 수가 없다. 즉 일종의 공유 디렉토리라고 볼 수 있다 sticky bit가 붙은 가장 유명한 사례는 유닉스의 임시 파일을 쓰는 디렉토리인 /tmp이다. 디렉토리에 스티키 비트를 붙일 때 누구나 읽고, 쓰고, 실행할 수 있도록 777 권한을 줘야하며 다음은 /opt/mytmp에 스티키 비트를 부여하는 예제이다.
    ```$ chmod -R 1777 /opt/mytmp```

### 운영체제의 기초
- 프로세스와 쓰레드 : 프로세스(process)와 프로그램의 차이는 정말 명확하다. 프로그램은 보조기억장치 (하드디스크, SSD)에 존재하며 실행되기를 기다리는 명령어(=코드)와 정적인 데이터의 묶음이다. 이런 프로그램의 명령어와 정적 데이터가 메모리에 적재되면 프로세스가 된다. 즉 프로세스란 실행중인 프로그램이라고 할수있다. 쓰레드(thread)는 어떠한 프로그램 내에서, 특히 프로세스 내에서 실행되는 흐름의 단위를 말한다. 일반적으로 한 프로그램은 하나의 스레드를 가지고 있지만, 프로그램 환경에 따라 둘 이상의 스레드를 동시에 실행할 수 있다. 이러한 실행 방식을 멀티 스레드라고 한다.

### 프로세스와 스레드의 비교
멀티프로세스와 멀티스레드는 양쪽 모두 여러 흐름이 동시에 진행된다는 공통점을 가지고 있다. 하지만 멀티프로세스에서 각 프로세스는 독립적으로 실행되며 각각 별개의 메모리를 차지하고 있는 것과 달리 멀티스레드는 프로세스 내의 메모리를 공유해 사용할 수있다. 또한 프로세스 간의 전환 속도보다 스레드 간의 전환 속도가 빠르다.
- 멀티스레드의 장점은 CPU가 여러 개일 경우에 각각의 CPU가 스레드 하나씩을 담당하는 방법으로 속도를 높일 수 있다는 것이다. 이러한 시스템에서는 여러 스레드가 실제 시간상으로 동시에 수행될수 있기 때문이다. 
- 멀티스레드의 단점으로는 각각의 스레드 중 어떤 것이 먼저 실행될지 그 순서를 알 수 없다는 것이 있다. 예를 들어, 두 스레드가 특정 공유변수 i값을 1증가 시키는 명령을 실행할 떄, 다음과 같은 방식으로 수행될 수 있다.

- 파일 시스템


### 리눅스의 배포판
### Ubuntu, Debian, Redhat Enterprise, CentOS,  Gentoo, Amazon Linux

- 우분투 = 리눅스 커널을 기반으로 인기 많은 리눅스 배포판 중 하나, 다른 배포판에 비해 편리한 설치와 유지보수 절차, 사용자 친화적인 사용법과 인터페이스가 특징으로 출시이후 가장 넓은 사용층을 가진 배포판이다. GNOME소프트웨어 센터를 기본으로 사용한다.

- 데비안 = 커뮤니티인 데비안 프로젝트에서 개발하고 있는 리눅스 배포판이다. 데비안은 리눅스에서 파생된 것이 아니고 독립적인 프로젝트다. 그래서 리눅스 커널과 다른 커널을 쓰는 데비안도 존재했다 그러나 현재는 리눅스와 Hurd커널 기반으로만 개발되고 있다.

- 레드햇 엔터프라이즈 =  기반은 페도라이다. RHEL은 안정성을 추구하기 때문에 페도라보다 훨씬 안정적이다. 개발용으로만 사용한다는 조건이 붙은 무료라이선스가 존재한다. 한국의 서버 관리자들이 가장 선호한다. 

- 센트오에스 = RHEL에서 파생된 리눅스 배포판. 페도라가 선구적인 기술의 도입이 빨라 RHEL을 제대로 반영하지 못하게되어 RHEL을 완벽에 가깝게 반영하는 것을 목적으로 만들어진 배포판이다. 리눅스 서버중 인기가 가장 많은 RHEL을 무료로 사용할수 있기에 인기가 많다. 단점이라면 RHEL과 달리 사후 지원이 없다. 전문 인력이 있을경우 문제가 없지만 전문인력이 아닐경우 RHEL를 사용하는 것이 더 안정적임.

- 젠투리눅스 = 젠투 재단 제작하고 있는 리눅스 배포판.  젠투의 특징은 BSD계열 유닉스 대부분이 그렇듯. 모든 것을 컴파일하여 설치한다는 것이다. 젠투는 패키지 관리자 자체가 바이너리를 다운로드하는 대신 소스 코드를 다운로드하여 현장에서 컴파일해 프로그램을 만들어 낸다. 장점은 원하는대로 컴파일 옵션을 주어 보다 자신의 컴퓨터와 요구사항에 맞는 시스템을 구성하는 것이 가능하다. 단점은 엄청나게 긴 컴파일 시간이다.

- 아마존리눅스 = 아마존사가 개발한 RHEL베이스의 배포판으로 EC2인스턴스를 만들때 선택 가능한 AMI중의 하나이다. 주요 장점은 아마존이 개발중이기에 서포트 받기 쉽다는 점과  AWS 서비스와 상성이 좋다는 점. yum이 매우 빠르다는 점이있다. 단점으로는 레드햇이나 centOS에서 이용할수 있는 yum패키지가 amazon liux에 도입할수가 없는 경우가 있다.

### 패키지 시스템: apt(.deb), yum(.rpm)

- 리눅스 계열은 크게 Redhat 계열과 Debian계열이 있다. Fedora CentOS는 Redhat계열이고 Ubuntu가  Debian계열이라고 할 수 있다.
- 그중 Redhat계열에서 쓰이는 Package관리자 명령어 도구로 yum이 있다. Debian계열의 Package 관리자 명령어 도구로 apt-get(Advanced Pakaaginf Tool), dpkg가 있다.
- [deb 파일이란] 데비안 꾸러미 파일입니다. (우분투가 데비안 배포판과 관련이 있어서  데비안 리눅스가 아니더라도 deb파일 설치 시에는 dpkg명령어로 deb파일을 설치 할 수 있습니다. ) dpkg로 설치해야하는 이유는 외부 네트워크로 접속이 안되는 환경에선 직접 다운받은 (컴퓨터에 저장된)패키지를 설치해야 하기 때문입니다.)

    ```$ dpkg```
- YUM
Red Hat Enterprise Linux에서 소프트웨어 패키지를 설치, 업데이트, 제거 및 관리하기 위한 기본 패키지 관리 도구입니다. 소프트웨어 패키지를 설치, 업데이트 및 제거할 때 종속성 해결을 수행합니다. 시스템에 설치된 저장소 또는 패키지에서 패키지를 관리할 수 있습니다 .rpm. 의 기본 구성 파일 YUM은  /etc/yum.conf에 있고, 모든 저장소는  /etc/yum.repos.d에 있습니다.

    ```$ yum -option command```

- RPM
Red Hat Enterprise Linux 기반 배포판에서 널리 사용되는 패키지 관리 도구입니다. 를 사용하여 개별 소프트웨어 패키지를 설치, 제거 및 쿼리할 수 있습니다. 여전히 .NET과 같은 종속성 해결을 관리할 수 없습니다 YUM. RPM이 필요한 패키지 목록을 포함하여 유용한 출력을 제공합니다. RPM패키지는 파일 및 메타 데이터의 아카이브로 구성되어 있습니다. 메타데이터에는 도우미 스크립트, 파일 속성 및 패키지에 대한 정보가 포함됩니다.

### vi
 
 "Visual editor" UNIX계열 운영체제에서 사용되는 오픈 소스 문서 편집기 이다.vim과 호환되긴 하지만 다른 것이다. 원칙적으로 텍스트 모드에서 작동하도록 만들어 졌기 때문에 어떠한 플랫폼용 버전을 사용해도 기본적으로 모든 GUI가 텍스트 문자로 이루어져 있다. 특징으로 초심자가 익숙해지기 까지가 어려운 편이고, vi 키맵이 요즘날의 UX와는 동떨어져있다. 

- i : 커서 앞(왼쪽)에 입력
- w : 저장한다.
- q : 종료한다.
- u : 방금 한 명령 취소
- d : dd 커서가 위치한곳 한줄 삭제, 
- p : 현재 커서가 있는 줄 바로 아래에 버퍼 내용 붙여넣기

## Resources

- The Linux command line for beginners
https://ubuntu.com/tutorials/command-line-for-beginners#1-overview

- The Linux Directory Structure, Explained
https://www.howtogeek.com/117435/htg-explains-the-linux-directory-structure-explained/

- Unix / Linux - What is Shells?
https://www.tutorialspoint.com/unix/unix-what-is-shell.htm

- zsh
https://github.com/ohmyzsh/ohmyzsh/wiki/Installing-ZSH

- About systemd
https://www.infoworld.com/article/2832405/what-is-systemd-and-why-does-it-matter-to-linux-users.html

- About linux distributions
https://thebloggingpot.com/2018/05/23/different-linux-distributions-explained/

- RPM and YUM package management
https://developer.ibm.com/technologies/linux/tutorials/l-lpic1-102-5/

- File editing with vi
https://developer.ibm.com/technologies/linux/tutorials/l-lpic1-103-8/


# Checklist
- 리눅스의 파이프 문자는 어떤 역할을 하나요?
- 리눅스의 셸은 어떤 역할을 하나요? bash와 zsh는 어떻게 다른가요?
- 리눅스의 권한 체계는 어떻게 이루어져 있나요?
- 프로세스와 쓰레드는 무엇인가요?
- 현재 실행되고 있는 프로세스들 중 PID가 1인 프로세스는 어떤 역할을 할까요? init과 systemd는 무엇이고 어떻게 다른가요?
- 파일시스템이란 무엇일까요? 어떤 것이 있을까요? 지금 다루는 운영체제는 어떤 파일시스템을 쓰고 있나요?
- 리눅스의 배포판이란 무엇일까요? 여러 가지 배포판들은 어떻게 생겨났을까요?
- 리눅스의 패키지 시스템이란 무엇일까요? 이러한 시스템이 생긴 이유는 무엇일까요?  deb과 rpm은 어떤 차이가 있을까요? RPM이 있는데 yum과 같은 시스템이 나온 이유는 무엇일까요?
- vi는 어떤 에디터인가요? vi와 vim은 어떻게 다를까요? vi는 왜 모든 리눅스의 기본 에디터가 되었을까요?


# Quest
- 인스턴스 생성
- t3.nano 등급으로 EC2 인스턴스를 생성해 봅시다! Amazon Linux 2, Ubuntu 두 가지를 각각 생성해 봅니다.
- EC2 생성 과정에서 .pem 파일이 하나 생기는데, 이는 저에게 슬랙을 통해 공유해 주시면 됩니다.
- 세 배포판은 어떻게 다른가요?.

# 리눅스 연습
- Amazon Linux 2 인스턴스에서 위의 Topics의 기본 커맨드를 연습해 봅니다.
- 리눅스의 기본 디렉토리들에 어떤 정보들이 있는지 둘러 봅니다.
- zsh를 설치하고 .zshrc 파일을 포함해 여러 가지 설정을 해 봅니다.
- Topics의 환경변수나 퍼미션 관련 커맨드를 연습해 봅니다.
- 현재 실행되고 있는 프로세스들과 마운트 된 파일시스템들을 확인해 봅니다.
- vi를 열어 여러 가지 기본 명령과 간단한 편집 방법을 연습해 봅니다.
- 생성한 인스턴스 중 Ubuntu는 완전히 종료(Terminate)하고, Amazon Linux 2는 일단 꺼둡니다.

# Advanced
- 리눅스 외의 POSIX 호환 운영체제에는 어떤 것들이 있을까요? 그러한 운영체제들은 어떤 용도로 쓰일까요?
- 윈도우를 제외하고, 최근에 발표된 운영체제들 중 POSIX에 호환되지 않는 운영체제도 있을까요?